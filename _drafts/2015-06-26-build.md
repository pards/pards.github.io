---
layout: post
title: "Broken Build"
description: "CI tools are broken"
category: build
tags: [continuous integration, build, jenkins, hudson]
---

I have been used automated build tools on all my projects since 2000.  Back then it was CruiseControl in all its XML-configuration glory.  Today it is usually Jenkins, or sometimes TeamCity, and I recently tried out [ThoughtWorks Go](http://go.cd).  The user interfaces have generally improved over time, and now there is probably a "plugin for that" thing you used to script manually, but not much has changed in the last 15 years.

In fact, I think the automated build is actually flakier mostly due to the increased complexity.

Take the typical Java stack for example.  I have an AngularJS front-end, talking to a REST API implemented in Java with Spring, and persisting everything in a PostgreSQL database.  There are 3 distinct languages involved (Java, JavaScript and SQL) which all require their own distinct cornucopia of tools.  They all have their own testing framework, and the build box is Windows, but it is deployed to a Linux box.

Co-ordinating this build in Jenkins is a shit-show.  I need npm, bower, and grunt plus protractor/selenium for the front-end.  I need Java and Maven on the server-side, plus RAML for the REST docs, and then Apache2, Tomcat and PostgreSQL on the test server.  Puppet was supposed to solve the provisioning problem but it is not really mature enough yet (at least, not for the Java stack - try getting Oracle Java 8, Tomcat 8, PostgreSQL 9.4 and Apache2 on Ubuntu 14 and you will start to understand the pain).  

Now I have 5 Jenkins jobs (back-end build/test, front-end build/test, acceptance test, QA deploy, doc generation) all hobbled together and limping around the server like a zombie.  Speaking of zombies - the Protractor tests rarely shutdown the Selenium server properly so those zombies prevent the "npm install; bower install" dance from completing cleanly. There are SSH and SCP steps, Maven plugins doing remote deployments to Tomcat, remote PSQL scripts migrating the database, and no meaningful way to do "one binary, all environments" in Maven.

ThoughtWorks Go was meant to help with this by making Pipelines a first-class citizen. It shows promise, but the diagram on the front page of the website bears little resemblence to the UI itself. It also has its own artifact repo, because we needed another way to store packages beyond Nexus, NPM, apt-get, and yum. Oh, and it is really just an elaborate CruiseControl under the hood. Everything old is new again if you put a snazzy UI on it.

Maybe it is time to accept that our Continuous Integration and/or Continuous Deployment process are in fact just very complex batch jobs like we used to run back in the 90s.  We already have tools for that, and they are very mature.  They have seen this show before, and they nailed it decades ago.

What do you think? Can you build a CI/CD flow in AutoSys or Tidal?
